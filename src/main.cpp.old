#include <Arduino.h>

#include <FastLED.h>

void setup() {

}

void loop()
{
    Serial.begin(115200);
    Serial.print("Begin!");

    char buffer[64];
    auto expected = 0;

    while (true)
    {
        if (!Serial.available())
        {
            delay(10);
            continue;
        }

        auto next = Serial.read();
        if (next != expected)
        {
            snprintf(buffer, 128, "Expected %d but got %d", expected, next);
            Serial.println(buffer);
        }

        if (expected != 0 && expected % 255 == 0)
        {
            snprintf(buffer, 128, "Progress: %d", expected);
            Serial.println(buffer);
        }

        expected = (expected + 1) % 256;
    }
}